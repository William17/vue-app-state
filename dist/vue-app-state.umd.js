!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.AppState=t()}(this,function(){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function r(e,t){o(this,r),this.prefix=e+"/",this.storage=t,this._cache={}}var e,t,n;return e=r,(t=[{key:"_parseKey",value:function(e){return this.prefix+e}},{key:"$set",value:function(e,t){e=this._parseKey(e),t=JSON.stringify(t),this._cache[e]=JSON.parse(t),this.storage.setItem(e,t)}},{key:"$get",value:function(e){return e=this._parseKey(e),this._cache.hasOwnProperty(e)||(this._cache[e]=JSON.parse(this.storage.getItem(e))),this._cache[e]}},{key:"$remove",value:function(e){return e=this._parseKey(e),delete this._cache[e],this.storage.removeItem(e)}},{key:"$keys",value:function(){var t=this;return Object.keys(this.storage).filter(function(e){return-1<e.indexOf(t.prefix)}).map(function(e){return e.replace(t.prefix,"")})}}])&&i(e.prototype,t),n&&i(e,n),r}(),u={$storage:function(e){var t=this.__internal__,r=t.storages[e];if(!r){var n=t.localStorage,i=t.prefix+e;r=new s(i,n),t.storages[e]=r}return r},$get:function(e){return this.__internal__.rootStorage.$get(e)},$set:function(e,t){return this.__internal__.rootStorage.$set(e,t)},$remove:function(e){return this.__internal__.rootStorage.$remove(e)},$keys:function(){return this.__internal__.rootStorage.$keys()}},t=function e(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=r.prefix||"APP_STATE/",i=r.localStorage||(void 0!==i?i:window.localStorage),a={prefix:n,storages:{},localStorage:i,rootStorage:new s(n,i)};Object.defineProperty(this,"__internal__",{value:a,writeable:!1,configurable:!1,enumerable:!1}),Object.keys(u).forEach(function(e){Object.defineProperty(t,e,{value:u[e],writeable:!1,configurable:!1,enumerable:!1})})};return{install:function(e){e.mixin({beforeCreate:function(){var e=this.$options.appState;void 0!==e?this.$appState=new t(e):this.$parent?this.$appState=this.$parent.$appState:this.$appState=new t(e)}})}}});
//# sourceMappingURL=vue-app-state.umd.js.map
